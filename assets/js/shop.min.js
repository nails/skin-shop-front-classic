var _nails_skin_shop_classic;_nails_skin_shop_classic=function(){return this._product_single_image_gallery_inited_xssm=!1,this._product_single_image_gallery_inited_mdlg=!1,this._checkout_skeuocard=null,this.__construct=function(){var e=this;$(".nails-skin-shop-classic .product-sort").length>0&&this._browse_sorter_init(),$(".nails-skin-shop-classic .sidebar-filter").length>0&&this._browse_sidebar_filter_init(),$(".nails-skin-shop-classic.browse.product.single").length>0&&(this._product_single_image_gallery_init(),this._product_single_image_zoomer_init(),this._popover_init(),$(window).on("resize",function(){e._product_single_image_gallery_init()})),$(".nails-skin-shop-classic.checkout").length>0&&this._checkout_init(),$(".nails-skin-shop-classic.processing").length>0&&this._processing_init()},this._browse_sidebar_filter_init=function(){$(".nails-skin-shop-classic .sidebar-filter .filter-list").hover(function(){var e=parseInt($(this).css("max-height"),10);$(this).attr("data-orig-max-height",e);var s=1.5*e;$(this).stop().animate({"max-height":s})},function(){var e=$(this).attr("data-orig-max-height");$(this).stop().animate({"max-height":e})})},this._browse_sorter_init=function(){$(".nails-skin-shop-classic .product-sort select").on("change",function(){$(".nails-skin-shop-classic .product-sort").addClass("submitting"),$(this).closest("form").submit()})},this._product_single_image_zoomer_init=function(){if($.fn.zoom){var e;e=this.get_current_bs_breakpoint(),("md"===e||"lg"===e)&&(this._product_single_image_zoomer_destroy(),$(".featured-image-md-lg .featured-img-link").zoom())}},this._product_single_image_zoomer_destroy=function(){if($.fn.zoom){var e;e=this.get_current_bs_breakpoint(),("md"===e||"lg"===e)&&$(".featured-image-md-lg .featured-img-link").trigger("zoom.destroy")}},this._product_single_image_gallery_init=function(){var e,s,a,t=[];if(e=this,s=this.get_current_bs_breakpoint(),"xs"===s||"sm"===s){if(this._product_single_image_gallery_inited_xssm)return;this._product_single_image_gallery_inited_xssm=!0,a={link:$(".featured-image-xs-sm .featured-img-link").attr("href"),link_el:$(".featured-image-xs-sm .featured-img-link"),img:$(".featured-image-xs-sm .featured-img-img").attr("src"),img_el:$(".featured-image-xs-sm .featured-img-img")},$(".gallery-xs-sm .gallery-link").each(function(e){t[e]={},t[e].link=$(this).attr("href"),t[e].link_el=$(this)}),$(".gallery-xs-sm .gallery-img").each(function(e){t[e].img=$(this).attr("src"),t[e].img_el=$(this)}),$(t).each(function(){var e=$(this).get(0);e.link_el.on("click",function(){return a.img_el.attr("src",e.img),a.link_el.attr("href",e.link),!1})})}if("md"===s||"lg"===s){if(this._product_single_image_gallery_inited_mdlg)return;this._product_single_image_gallery_inited_mdlg=!0,a={link:$(".featured-image-md-lg .featured-img-link").attr("href"),link_el:$(".featured-image-md-lg .featured-img-link"),img:$(".featured-image-md-lg .featured-img-img").attr("src"),img_el:$(".featured-image-md-lg .featured-img-img")},$(".gallery-md-lg .gallery-link").each(function(e){t[e]={},t[e].link=$(this).attr("href"),t[e].link_el=$(this)}),$(".gallery-md-lg .gallery-img").each(function(e){t[e].img=$(this).attr("src"),t[e].img_el=$(this)}),$.fn.fancybox&&$(a.link_el).on("click",function(){var e=[],s=$(".featured-image-md-lg .featured-img-link").attr("href");e.push({href:s});var a=!1;for(var i in t)a!==!1||t[i].link!==s?a!==!1&&e.push({href:t[i].link}):a=i;for(i=0;a>i;i++)e.push({href:t[i].link});return $.fancybox.open(e),!1}),$(t).each(function(){var s=$(this).get(0);s.link_el.on("click",function(){return a.img_el.attr("src",s.img),a.link_el.attr("href",s.link),e._product_single_image_zoomer_init(),!1})}),$("table.table-variants tr.variant.has-img").on("mouseenter",function(){e._product_single_image_variant_enter($(this).data("image"))})}},this._product_single_image_variant_enter=function(e){$("a.featured-img-link img").attr("src",e)},this._checkout_init=function(){$("#checkout-step-1 .panel-footer").removeClass("hidden"),$("#checkout-step-2 .panel-body").hide(),$("#checkout-step-2 .panel-footer").hide(),$("#checkout-step-2 .panel-footer").removeClass("hidden"),$("#checkout-step-3 .panel-body").hide(),$("#checkout-step-3 .panel-footer").hide(),$("#progress-bar").removeClass("hidden"),$("#progress-bar-hr").remove(),this._checkout_set_progress(1),$("#same-billing-address").prop("checked")?$("#billing-address").hide():$("#billing-address").show(),this._checkout_skeuocard=new Skeuocard($("#skeuocard"),{dontFocus:!0});var e=this;$("#checkout-step-1 .panel-footer .action-continue").on("click",function(){return e._checkout_validate_step_1()&&($("#checkout-step-1 .panel-body").slideUp(),$("#checkout-step-1 .panel-footer").slideUp(),$("#checkout-step-2 .panel-body").slideDown(),$("#checkout-step-2 .panel-footer").slideDown(),e._checkout_set_progress(2)),!1}),$("#checkout-step-2 .panel-footer .action-continue").on("click",function(){return e._checkout_validate_step_2()&&($("#checkout-step-2 .panel-body").slideUp(),$("#checkout-step-2 .panel-footer").slideUp(),$("#checkout-step-3 .panel-body").slideDown(),$("#checkout-step-3 .panel-footer").slideDown(),e._checkout_set_progress(3)),!1}),$("#checkout-step-2 .panel-footer .action-back").on("click",function(){return $("#checkout-step-1 .panel-body").slideDown(),$("#checkout-step-1 .panel-footer").slideDown(),$("#checkout-step-2 .panel-body").slideUp(),$("#checkout-step-2 .panel-footer").slideUp(),$("#checkout-step-1 .panel-heading .validate-ok").addClass("hidden"),$("#checkout-step-1 .panel-heading .validate-fail").addClass("hidden"),$("#checkout-step-2 .panel-heading .validate-ok").addClass("hidden"),$("#checkout-step-2 .panel-heading .validate-fail").addClass("hidden"),e._checkout_set_progress(1),!1}),$("#same-billing-address").on("change",function(){$(this).prop("checked")?$("#billing-address").slideUp():$("#billing-address").slideDown()}),$("#checkout-step-3 .panel-footer .action-continue").on("click",function(){return e._checkout_validate_step_3()&&($("#progress-bar .progress-bar").text("Please wait while we get things started...").addClass("active"),$("#progress-bar").addClass("please-wait"),$("#checkout-step-3 .panel-body").slideUp(),$("#checkout-step-3 .panel-footer").slideUp(function(){switch($("input[name=payment_gateway]:checked").val().toLowerCase()){case"stripe":var e=window.NAILS.SHOP_Checkout_Stripe_publishableKey;Stripe.setPublishableKey(e),Stripe.card.createToken({number:$("#card-form input[name=cc_number]").val(),cvc:$("#card-form input[name=cc_cvc]").val(),exp_month:$("#card-form input[name=cc_exp_month]").val(),exp_year:$("#card-form input[name=cc_exp_year]").val()},function(e,s){if(s.error){var a=s.error.message;$("#checkout-step-3 .panel-body").slideUp(),$("#checkout-step-3 .panel-footer").slideDown(),alert(a)}else{var t=s.id,i=$("#stripe-hidden-token");if(0===i.length){var r=$("<input>").attr("type","hidden").attr("name","stripe_token").attr("id","stripe-hidden-token");$("#card-form").prepend(r),i=$("#stripe-hidden-token")}i.val(t),$("#card-form input[name=cc_number]").val(""),$("#card-form input[name=cc_cvc]").val(""),$("#card-form input[name=cc_exp_month]").val(""),$("#card-form input[name=cc_exp_year]").val(""),$("#checkout-form").submit()}});break;default:$("#checkout-form").submit()}})),!1}),$("#checkout-step-3 .panel-footer .action-back").on("click",function(){return $("#checkout-step-2 .panel-body").slideDown(),$("#checkout-step-2 .panel-footer").slideDown(),$("#checkout-step-3 .panel-body").slideUp(),$("#checkout-step-3 .panel-footer").slideUp(),$("#checkout-step-2 .panel-heading .validate-ok").addClass("hidden"),$("#checkout-step-2 .panel-heading .validate-fail").addClass("hidden"),$("#checkout-step-3 .panel-heading .validate-ok").addClass("hidden"),$("#checkout-step-3 .panel-heading .validate-fail").addClass("hidden"),e._checkout_set_progress(2),!1}),$("table.checkout-payment-gateway-layout input").on("click",function(e){e.stopPropagation(),$(this).data("is-redirect")?$("#card-form").removeClass("active"):$("#card-form").addClass("active")}),$("table.checkout-payment-gateway-layout").on("click",function(){return $(this).find("input").prop("checked",!0),$(this).data("is-redirect")?$("#card-form").removeClass("active"):$("#card-form").addClass("active"),!1})},this._checkout_set_progress=function(e){var s=3,a="Step "+e+" of "+s,t=100/s*e;$("#progress-bar .progress-bar").animate({width:t+"%"}).text(a)},this._checkout_validate_step_1=function(){var e=!0,s="";if(s=$("input[name=delivery_address_line_1]").val(),s=$.trim(s),$("input[name=delivery_address_line_1]").closest(".form-group").removeClass("has-error has-feedback"),$("input[name=delivery_address_line_1]").next(".help-block").remove(),$("input[name=delivery_address_line_1]").siblings(".form-control-feedback").addClass("hidden"),0===s.replace(/\s/g,"").length&&(e=!1,$("input[name=delivery_address_line_1]").closest(".form-group").addClass("has-error has-feedback"),$("input[name=delivery_address_line_1]").after('<p class="help-block">This field is required.</p>'),$("input[name=delivery_address_line_1]").siblings(".form-control-feedback").removeClass("hidden")),s=$("input[name=delivery_address_town]").val(),s=$.trim(s),$("input[name=delivery_address_town]").closest(".form-group").removeClass("has-error has-feedback"),$("input[name=delivery_address_town]").next(".help-block").remove(),$("input[name=delivery_address_town]").siblings(".form-control-feedback").addClass("hidden"),0===s.replace(/\s/g,"").length&&(e=!1,$("input[name=delivery_address_town]").closest(".form-group").addClass("has-error has-feedback"),$("input[name=delivery_address_town]").after('<p class="help-block">This field is required.</p>'),$("input[name=delivery_address_town]").siblings(".form-control-feedback").removeClass("hidden")),s=$("input[name=delivery_address_postcode]").val(),s=$.trim(s),$("input[name=delivery_address_postcode]").closest(".form-group").removeClass("has-error has-feedback"),$("input[name=delivery_address_postcode]").next(".help-block").remove(),$("input[name=delivery_address_postcode]").siblings(".form-control-feedback").addClass("hidden"),0===s.replace(/\s/g,"").length&&(e=!1,$("input[name=delivery_address_postcode]").closest(".form-group").addClass("has-error has-feedback"),$("input[name=delivery_address_postcode]").after('<p class="help-block">This field is required.</p>'),$("input[name=delivery_address_postcode]").siblings(".form-control-feedback").removeClass("hidden")),s=$("select[name=delivery_address_country]").val(),s=$.trim(s),$("select[name=delivery_address_country]").closest(".form-group").removeClass("has-error has-feedback"),$("select[name=delivery_address_country]").next(".help-block").remove(),$("select[name=delivery_address_country]").siblings(".form-control-feedback").addClass("hidden"),0===s.replace(/\s/g,"").length&&(e=!1,$("select[name=delivery_address_country]").closest(".form-group").addClass("has-error has-feedback"),$("select[name=delivery_address_country]").after('<p class="help-block">This field is required.</p>'),$("select[name=delivery_address_country]").siblings(".form-control-feedback").removeClass("hidden")),s=$("input[name=first_name]").val(),s=$.trim(s),$("input[name=first_name]").closest(".form-group").removeClass("has-error has-feedback"),$("input[name=first_name]").next(".help-block").remove(),$("input[name=first_name]").siblings(".form-control-feedback").addClass("hidden"),0===s.replace(/\s/g,"").length&&(e=!1,$("input[name=first_name]").closest(".form-group").addClass("has-error has-feedback"),$("input[name=first_name]").after('<p class="help-block">This field is required.</p>'),$("input[name=first_name]").siblings(".form-control-feedback").removeClass("hidden")),s=$("input[name=last_name]").val(),s=$.trim(s),$("input[name=last_name]").closest(".form-group").removeClass("has-error has-feedback"),$("input[name=last_name]").next(".help-block").remove(),$("input[name=last_name]").siblings(".form-control-feedback").addClass("hidden"),0===s.replace(/\s/g,"").length&&(e=!1,$("input[name=last_name]").closest(".form-group").addClass("has-error has-feedback"),$("input[name=last_name]").after('<p class="help-block">This field is required.</p>'),$("input[name=last_name]").siblings(".form-control-feedback").removeClass("hidden")),s=$("input[name=email]").val(),s=$.trim(s),$("input[name=email]").closest(".form-group").removeClass("has-error has-feedback"),$("input[name=email]").next(".help-block").remove(),$("input[name=email]").siblings(".form-control-feedback").addClass("hidden"),0===s.replace(/\s/g,"").length)e=!1,$("input[name=email]").closest(".form-group").addClass("has-error has-feedback"),$("input[name=email]").after('<p class="help-block">This field is required.</p>'),$("input[name=email]").siblings(".form-control-feedback").removeClass("hidden");else{var a=/^([a-z0-9\+_\-]+)(\.[a-z0-9\+_\-]+)*@([a-z0-9\-]+\.)+[a-z]{2,6}$/i;a.test(s)===!1&&(e=!1,$("input[name=email]").closest(".form-group").addClass("has-error has-feedback"),$("input[name=email]").after('<p class="help-block">A valid email must be given.</p>'),$("input[name=email]").siblings(".form-control-feedback").removeClass("hidden"))}return e===!0?($("#checkout-step-1 .panel-heading .validate-ok").removeClass("hidden"),$("#checkout-step-1 .panel-heading .validate-fail").addClass("hidden")):($("#checkout-step-1 .panel-heading .validate-ok").addClass("hidden"),$("#checkout-step-1 .panel-heading .validate-fail").removeClass("hidden")),e},this._checkout_validate_step_2=function(){var e=!0,s="";return $("#same-billing-address").prop("checked")===!1&&(s=$("input[name=billing_address_line_1]").val(),s=$.trim(s),$("input[name=billing_address_line_1]").closest(".form-group").removeClass("has-error has-feedback"),$("input[name=billing_address_line_1]").next(".help-block").remove(),$("input[name=billing_address_line_1]").siblings(".form-control-feedback").addClass("hidden"),0===s.replace(/\s/g,"").length&&(e=!1,$("input[name=billing_address_line_1]").closest(".form-group").addClass("has-error has-feedback"),$("input[name=billing_address_line_1]").after('<p class="help-block">This field is required.</p>'),$("input[name=billing_address_line_1]").siblings(".form-control-feedback").removeClass("hidden")),s=$("input[name=billing_address_town]").val(),s=$.trim(s),$("input[name=billing_address_town]").closest(".form-group").removeClass("has-error has-feedback"),$("input[name=billing_address_town]").next(".help-block").remove(),$("input[name=billing_address_town]").siblings(".form-control-feedback").addClass("hidden"),0===s.replace(/\s/g,"").length&&(e=!1,$("input[name=billing_address_town]").closest(".form-group").addClass("has-error has-feedback"),$("input[name=billing_address_town]").after('<p class="help-block">This field is required.</p>'),$("input[name=billing_address_town]").siblings(".form-control-feedback").removeClass("hidden")),s=$("input[name=billing_address_postcode]").val(),s=$.trim(s),$("input[name=billing_address_postcode]").closest(".form-group").removeClass("has-error has-feedback"),$("input[name=billing_address_postcode]").next(".help-block").remove(),$("input[name=billing_address_postcode]").siblings(".form-control-feedback").addClass("hidden"),0===s.replace(/\s/g,"").length&&(e=!1,$("input[name=billing_address_postcode]").closest(".form-group").addClass("has-error has-feedback"),$("input[name=billing_address_postcode]").after('<p class="help-block">This field is required.</p>'),$("input[name=billing_address_postcode]").siblings(".form-control-feedback").removeClass("hidden")),s=$("select[name=billing_address_country]").val(),s=$.trim(s),$("select[name=billing_address_country]").closest(".form-group").removeClass("has-error has-feedback"),$("select[name=billing_address_country]").next(".help-block").remove(),$("select[name=billing_address_country]").siblings(".form-control-feedback").addClass("hidden"),0===s.replace(/\s/g,"").length&&(e=!1,$("select[name=billing_address_country]").closest(".form-group").addClass("has-error has-feedback"),$("select[name=billing_address_country]").after('<p class="help-block">This field is required.</p>'),$("select[name=billing_address_country]").siblings(".form-control-feedback").removeClass("hidden"))),e===!0?($("#checkout-step-2 .panel-heading .validate-ok").removeClass("hidden"),$("#checkout-step-2 .panel-heading .validate-fail").addClass("hidden")):($("#checkout-step-2 .panel-heading .validate-ok").addClass("hidden"),$("#checkout-step-2 .panel-heading .validate-fail").removeClass("hidden")),e},this._checkout_validate_step_3=function(){var e=!0,s="";return s=$("input[name=payment_gateway]:checked").val(),s=$.trim(s),$("#payment-gateway-choose-error").addClass("hidden"),$("#payment-card-error").addClass("hidden"),0===s.replace(/\s/g,"").length?(e=!1,$("#payment-gateway-choose-error").removeClass("hidden")):$('input[name="payment_gateway"]:checked').data("is-redirect")||this._checkout_skeuocard.isValid()||(e=!1,$("#payment-card-error").removeClass("hidden")),e===!0?($("#checkout-step-3 .panel-heading .validate-ok").removeClass("hidden"),$("#checkout-step-3 .panel-heading .validate-fail").addClass("hidden")):($("#checkout-step-3 .panel-heading .validate-ok").addClass("hidden"),$("#checkout-step-3 .panel-heading .validate-fail").removeClass("hidden")),e},this._processing_init=function(){var e=this;setTimeout(function(){e._processing_get_status()},250)},this._processing_get_status=function(){var e=$("#processing-container").data("order-ref"),s=this,a={controller:"shop",method:"order/status",data:{ref:e},success:function(e){200===e.status?s._processing_get_status_ok(e):s._processing_get_status_fail(e.error)},error:function(e){var a;try{a=JSON.parse(e.responseText)}catch(t){a={}}var i="string"==typeof a.error?a.error:"";s._processing_get_status_fail(i)}};_nails_api.call(a)},this._processing_get_status_ok=function(e){var s=this;switch($(".order-status-feedback").removeClass("unpaid paid abandoned cancelled failed pending").addClass("processing"),e.order.status){case"UNPAID":$("#thankyou-text").slideUp(),e.order.is_recent?setTimeout(function(){s._processing_get_status()},750):($(".order-status-feedback").removeClass("processing"),$(".order-status-feedback").addClass(e.order.status.toLowerCase()));break;case"PAID":$(".order-status-feedback").removeClass("processing"),$(".order-status-feedback").addClass(e.order.status.toLowerCase()),$("#thankyou-text").slideDown();break;case"ABANDONED":case"CANCELLED":case"FAILED":case"PENDING":$("#thankyou-text").slideUp(),$(".order-status-feedback").removeClass("processing"),$(".order-status-feedback").addClass(e.order.status.toLowerCase())}},this._processing_get_status_fail=function(e){alert(e)},this.get_current_bs_breakpoint=function(){var e=["xs","sm","md","lg"],s=window.document,a=s.createElement("div");s.body.appendChild(a);for(var t=e.length-1;t>=0;t--){var i=e[t];if(a.className="hidden-"+i,null===a.offsetParent)return s.body.removeChild(a),i}return""},this._popover_init=function(){"function"==typeof $.fn.popover&&$(".shop-bs-popover").popover({trigger:"hover",placement:"left"})},this.__construct()};
//# sourceMappingURL=./shop.min.js.map