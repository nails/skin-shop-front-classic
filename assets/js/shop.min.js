var _nails_skin_shop_classic;_nails_skin_shop_classic=function(){return this._product_single_image_gallery_inited_xssm=!1,this._product_single_image_gallery_inited_mdlg=!1,this.__construct=function(){var e=this;$(".nails-skin-shop-classic .product-sort").length>0&&this._browse_sorter_init(),$(".nails-skin-shop-classic .sidebar-filter").length>0&&this._browse_sidebar_filter_init(),$(".nails-skin-shop-classic.browse.product.single").length>0&&(this._product_single_image_gallery_init(),this._product_single_image_zoomer_init(),$(window).on("resize",function(){e._product_single_image_gallery_init()})),$(".nails-skin-shop-classic.checkout").length>0&&this._checkout_init()},this._browse_sidebar_filter_init=function(){$(".nails-skin-shop-classic .sidebar-filter .filter-list").hover(function(){var e=parseInt($(this).css("max-height"),10);$(this).attr("data-orig-max-height",e);var s=1.5*e;$(this).stop().animate({"max-height":s})},function(){var e=$(this).attr("data-orig-max-height");$(this).stop().animate({"max-height":e})})},this._browse_sorter_init=function(){$(".nails-skin-shop-classic .product-sort select").on("change",function(){$(".nails-skin-shop-classic .product-sort").addClass("submitting"),$(this).closest("form").submit()})},this._product_single_image_zoomer_init=function(){if($.fn.zoom){var e;e=this.get_current_bs_breakpoint(),("md"===e||"lg"===e)&&(this._product_single_image_zoomer_destroy(),$(".featured-image-md-lg .featured-img-link").zoom())}},this._product_single_image_zoomer_destroy=function(){if($.fn.zoom){var e;e=this.get_current_bs_breakpoint(),("md"===e||"lg"===e)&&$(".featured-image-md-lg .featured-img-link").trigger("zoom.destroy")}},this._product_single_image_gallery_init=function(){var e,s,i,a=[];if(e=this,s=this.get_current_bs_breakpoint(),"xs"===s||"sm"===s){if(this._product_single_image_gallery_inited_xssm)return;this._product_single_image_gallery_inited_xssm=!0,i={link:$(".featured-image-xs-sm .featured-img-link").attr("href"),link_el:$(".featured-image-xs-sm .featured-img-link"),img:$(".featured-image-xs-sm .featured-img-img").attr("src"),img_el:$(".featured-image-xs-sm .featured-img-img")},$(".gallery-xs-sm .gallery-link").each(function(e){a[e]={},a[e].link=$(this).attr("href"),a[e].link_el=$(this)}),$(".gallery-xs-sm .gallery-img").each(function(e){a[e].img=$(this).attr("src"),a[e].img_el=$(this)}),$(a).each(function(){var e=$(this).get(0);e.link_el.on("click",function(){return i.img_el.attr("src",e.img),i.link_el.attr("href",e.link),!1})})}if("md"===s||"lg"===s){if(this._product_single_image_gallery_inited_mdlg)return;this._product_single_image_gallery_inited_mdlg=!0,i={link:$(".featured-image-md-lg .featured-img-link").attr("href"),link_el:$(".featured-image-md-lg .featured-img-link"),img:$(".featured-image-md-lg .featured-img-img").attr("src"),img_el:$(".featured-image-md-lg .featured-img-img")},$(".gallery-md-lg .gallery-link").each(function(e){a[e]={},a[e].link=$(this).attr("href"),a[e].link_el=$(this)}),$(".gallery-md-lg .gallery-img").each(function(e){a[e].img=$(this).attr("src"),a[e].img_el=$(this)}),$.fn.fancybox&&$(i.link_el).on("click",function(){var e=[],s=$(".featured-image-md-lg .featured-img-link").attr("href");e.push({href:s});var i=!1;for(var t in a)i!==!1||a[t].link!==s?i!==!1&&e.push({href:a[t].link}):i=t;for(t=0;i>t;t++)e.push({href:a[t].link});return $.fancybox.open(e),!1}),$(a).each(function(){var s=$(this).get(0);s.link_el.on("click",function(){return i.img_el.attr("src",s.img),i.link_el.attr("href",s.link),e._product_single_image_zoomer_init(),!1})})}},this._checkout_init=function(){$("#checkout-step-1 .panel-footer").removeClass("hidden"),$("#checkout-step-2 .panel-body").hide(),$("#checkout-step-2 .panel-footer").hide(),$("#checkout-step-2 .panel-footer a.action-back").removeClass("hidden"),$("#checkout-step-3 .panel-body").hide(),$("#checkout-step-3 .panel-footer").hide(),$("#progress-bar").removeClass("hidden"),$("#progress-bar-hr").remove(),this._checkout_set_progress(1),$("#same-billing-address").prop("checked")?$("#billing-address").hide():$("#billing-address").show();var e=this;$("#checkout-step-1 .panel-footer .action-continue").on("click",function(){return e._checkout_validate_step_1()&&($("#checkout-step-1 .panel-body").slideUp(),$("#checkout-step-1 .panel-footer").slideUp(),$("#checkout-step-2 .panel-body").slideDown(),$("#checkout-step-2 .panel-footer").slideDown(),e._checkout_set_progress(2)),!1}),$("#checkout-step-2 .panel-footer .action-continue").on("click",function(){return e._checkout_validate_step_2()&&($("#checkout-step-2 .panel-body").slideUp(),$("#checkout-step-2 .panel-footer").slideUp(),$("#progress-bar .progress-bar").text("Please Wait...").addClass("active"),$("#checkout-form").submit()),!1}),$("#checkout-step-2 .panel-footer .action-back").on("click",function(){return $("#checkout-step-1 .panel-body").slideDown(),$("#checkout-step-1 .panel-footer").slideDown(),$("#checkout-step-2 .panel-body").slideUp(),$("#checkout-step-2 .panel-footer").slideUp(),$("#checkout-step-1 .panel-heading .validate-ok").addClass("hidden"),$("#checkout-step-1 .panel-heading .validate-fail").addClass("hidden"),$("#checkout-step-2 .panel-heading .validate-ok").addClass("hidden"),$("#checkout-step-2 .panel-heading .validate-fail").addClass("hidden"),e._checkout_set_progress(1),!1}),$("#same-billing-address").on("change",function(){$(this).prop("checked")?$("#billing-address").hide():$("#billing-address").show()})},this._checkout_set_progress=function(e){var s=2,i="Step "+e+" of "+s,a=100/s*e;$("#progress-bar .progress-bar").animate({width:a+"%"}).text(i)},this._checkout_validate_step_1=function(){var e=!0,s="";if(s=$("input[name=delivery_address_line_1]").val(),s=$.trim(s),$("input[name=delivery_address_line_1]").closest(".form-group").removeClass("has-error has-feedback"),$("input[name=delivery_address_line_1]").next(".help-block").remove(),$("input[name=delivery_address_line_1]").siblings(".form-control-feedback").addClass("hidden"),0===s.replace(/\s/g,"").length&&(e=!1,$("input[name=delivery_address_line_1]").closest(".form-group").addClass("has-error has-feedback"),$("input[name=delivery_address_line_1]").after('<p class="help-block">This field is required.</p>'),$("input[name=delivery_address_line_1]").siblings(".form-control-feedback").removeClass("hidden")),s=$("input[name=delivery_address_town]").val(),s=$.trim(s),$("input[name=delivery_address_town]").closest(".form-group").removeClass("has-error has-feedback"),$("input[name=delivery_address_town]").next(".help-block").remove(),$("input[name=delivery_address_town]").siblings(".form-control-feedback").addClass("hidden"),0===s.replace(/\s/g,"").length&&(e=!1,$("input[name=delivery_address_town]").closest(".form-group").addClass("has-error has-feedback"),$("input[name=delivery_address_town]").after('<p class="help-block">This field is required.</p>'),$("input[name=delivery_address_town]").siblings(".form-control-feedback").removeClass("hidden")),s=$("input[name=delivery_address_postcode]").val(),s=$.trim(s),$("input[name=delivery_address_postcode]").closest(".form-group").removeClass("has-error has-feedback"),$("input[name=delivery_address_postcode]").next(".help-block").remove(),$("input[name=delivery_address_postcode]").siblings(".form-control-feedback").addClass("hidden"),0===s.replace(/\s/g,"").length&&(e=!1,$("input[name=delivery_address_postcode]").closest(".form-group").addClass("has-error has-feedback"),$("input[name=delivery_address_postcode]").after('<p class="help-block">This field is required.</p>'),$("input[name=delivery_address_postcode]").siblings(".form-control-feedback").removeClass("hidden")),s=$("input[name=first_name]").val(),s=$.trim(s),$("input[name=first_name]").closest(".form-group").removeClass("has-error has-feedback"),$("input[name=first_name]").next(".help-block").remove(),$("input[name=first_name]").siblings(".form-control-feedback").addClass("hidden"),0===s.replace(/\s/g,"").length&&(e=!1,$("input[name=first_name]").closest(".form-group").addClass("has-error has-feedback"),$("input[name=first_name]").after('<p class="help-block">This field is required.</p>'),$("input[name=first_name]").siblings(".form-control-feedback").removeClass("hidden")),s=$("input[name=last_name]").val(),s=$.trim(s),$("input[name=last_name]").closest(".form-group").removeClass("has-error has-feedback"),$("input[name=last_name]").next(".help-block").remove(),$("input[name=last_name]").siblings(".form-control-feedback").addClass("hidden"),0===s.replace(/\s/g,"").length&&(e=!1,$("input[name=last_name]").closest(".form-group").addClass("has-error has-feedback"),$("input[name=last_name]").after('<p class="help-block">This field is required.</p>'),$("input[name=last_name]").siblings(".form-control-feedback").removeClass("hidden")),s=$("input[name=email]").val(),s=$.trim(s),$("input[name=email]").closest(".form-group").removeClass("has-error has-feedback"),$("input[name=email]").next(".help-block").remove(),$("input[name=email]").siblings(".form-control-feedback").addClass("hidden"),0===s.replace(/\s/g,"").length)e=!1,$("input[name=email]").closest(".form-group").addClass("has-error has-feedback"),$("input[name=email]").after('<p class="help-block">This field is required.</p>'),$("input[name=email]").siblings(".form-control-feedback").removeClass("hidden");else{var i=/^([a-z0-9\+_\-]+)(\.[a-z0-9\+_\-]+)*@([a-z0-9\-]+\.)+[a-z]{2,6}$/i;i.test(s)===!1&&(e=!1,$("input[name=email]").closest(".form-group").addClass("has-error has-feedback"),$("input[name=email]").after('<p class="help-block">A valid email must be given.</p>'),$("input[name=email]").siblings(".form-control-feedback").removeClass("hidden"))}return e===!0?($("#checkout-step-1 .panel-heading .validate-ok").removeClass("hidden"),$("#checkout-step-1 .panel-heading .validate-fail").addClass("hidden")):($("#checkout-step-1 .panel-heading .validate-ok").addClass("hidden"),$("#checkout-step-1 .panel-heading .validate-fail").removeClass("hidden")),e},this._checkout_validate_step_2=function(){var e=!0,s="";return $("#same-billing-address").prop("checked")===!1&&(s=$("input[name=billing_address_line_1]").val(),s=$.trim(s),$("input[name=billing_address_line_1]").closest(".form-group").removeClass("has-error has-feedback"),$("input[name=billing_address_line_1]").next(".help-block").remove(),$("input[name=billing_address_line_1]").siblings(".form-control-feedback").addClass("hidden"),0===s.replace(/\s/g,"").length&&(e=!1,$("input[name=billing_address_line_1]").closest(".form-group").addClass("has-error has-feedback"),$("input[name=billing_address_line_1]").after('<p class="help-block">This field is required.</p>'),$("input[name=billing_address_line_1]").siblings(".form-control-feedback").removeClass("hidden")),s=$("input[name=billing_address_town]").val(),s=$.trim(s),$("input[name=billing_address_town]").closest(".form-group").removeClass("has-error has-feedback"),$("input[name=billing_address_town]").next(".help-block").remove(),$("input[name=billing_address_town]").siblings(".form-control-feedback").addClass("hidden"),0===s.replace(/\s/g,"").length&&(e=!1,$("input[name=billing_address_town]").closest(".form-group").addClass("has-error has-feedback"),$("input[name=billing_address_town]").after('<p class="help-block">This field is required.</p>'),$("input[name=billing_address_town]").siblings(".form-control-feedback").removeClass("hidden")),s=$("input[name=billing_address_postcode]").val(),s=$.trim(s),$("input[name=billing_address_postcode]").closest(".form-group").removeClass("has-error has-feedback"),$("input[name=billing_address_postcode]").next(".help-block").remove(),$("input[name=billing_address_postcode]").siblings(".form-control-feedback").addClass("hidden"),0===s.replace(/\s/g,"").length&&(e=!1,$("input[name=billing_address_postcode]").closest(".form-group").addClass("has-error has-feedback"),$("input[name=billing_address_postcode]").after('<p class="help-block">This field is required.</p>'),$("input[name=billing_address_postcode]").siblings(".form-control-feedback").removeClass("hidden"))),e===!0?($("#checkout-step-2 .panel-heading .validate-ok").removeClass("hidden"),$("#checkout-step-2 .panel-heading .validate-fail").addClass("hidden")):($("#checkout-step-2 .panel-heading .validate-ok").addClass("hidden"),$("#checkout-step-2 .panel-heading .validate-fail").removeClass("hidden")),e},this.get_current_bs_breakpoint=function(){var e=["xs","sm","md","lg"],s=window.document,i=s.createElement("div");s.body.appendChild(i);for(var a=e.length-1;a>=0;a--){var t=e[a];if(i.className="hidden-"+t,null===i.offsetParent)return s.body.removeChild(i),t}return""},this.__construct()};